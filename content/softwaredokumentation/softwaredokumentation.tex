\part{Softwaredokumentation}

\chapter{Installation}
In diesem Kapitel soll eine Schrittweise Anleitung zur Installation von OpenDataHub auf verschiedenen Plattformen wiedergeben werden.
\section{vagrant}
\xxx[Erstellen Vagrant Dokumentation]
\section{Heroku}
\xxx[evtl alles automatisch?]
\begin{enumerate}
\item Klonen des Git Repositories
\shellcmd{git clone git@github.com:hsr-ba-fs15-dat/vm.git}
\item Heroku toolkit installieren
\item Namen des Servers von Heroku übernehmen.
\xxx[Welche Config files müssen angepasst werden?]
\item Vagrant konfiguration auf heroku pushen.
\shellcmd{vagrant push}
\end{enumerate}Klonen des Git-Repositorys

\section{Deploy per FTP}
\xxx[vagrant nach FTP deployen]

\chapter{Entwicklung}

\section{Entwicklungsumgebung}
Dieses Kapitel beschreibt das Aufsetzen der Entwicklungsumgebung für opendatahub. Voraussetzung ist eine Installation von vagrant.

\subsection{Vagrant}
Vagrant ist eine auf Ruby basierte, freie Anwendung, die das Verwalten und Erstellen von virtuellen Maschinen ermöglicht. Vagrant dient eigentlich als Wrapper zwischen der Virtualisierungssoftware (VirtualBox, VMware, Parallels, etc.) und Systemkonfiguartionswerkzeugen (in unserem Fall Puppet).
Der grosse Mehrwert von Vagrant ergibt sich dadurch, dass es komplett Plattform- und Programmiersprachenunabhängig ist und somit für verschiedene Softwareprojekte verwendet werden kann. Im Vagrantfile wird eine virtuelle Maschine definiert und konfiguriert. Dieses File wird mit dem Projekt in der Versonskontrolle abgelegt, so kann auf den unterschiedlichen Host Systemen gewährleistet werden, dass mit der selben Entwicklungsumgebung gearbeitet werden kann und so alle Abhängigkeiten, ohne das Hostsystem zu beeinflussen, gewährleistet werden.\\


Vagrant kann für alle Systeme von \url{vagrantup.com} heruntergeladen werden.
Für Mac OS X Systeme bietet sich die Installation via homebrew an.
\begin{src}{shell}
brew install vagrant
\end{src}

\subsection{Klonen des Git-Repository}
Der nächste Schritt ist das Klonen des Git Repositorys und starten der vagrant vm.
\begin{src}{shell}
git clone git@github.com:hsr-ba-fs15-dat/vm.git
cd vm
git clone git@github.com:hsr-ba-fs15-dat/opendatahub.git
vagrant up
\end{src}


\subsection{Arbeiten mit Vagrant}
Um eine \gls{vm} zu starten, führt man den Befehl \mintinline{shell}{vagrant up} aus. Beim Ausführen des Befehles wird die \gls{vm} gemäss den Vorgaben im Vagrantfile initialisiert. Später kann man mittels \mintinline{shell}{vagrant ssh} per SSH direkt in die \gls{vm} verbunden werden. Wird die Maschine (vorübergehend) nicht mehr gebraucht, kann mittels \mintinline{shell}{vagrant suspend} die \gls{vm} in den Ruhezustand gebracht werden.


\subsection{Initialisieren von Django}
Um mit der Entwicklung starten, folgende Befehle in der Konsole eingeben:
\begin{src}{shell}
vagrant ssh #verbindet mit der SSH Umgebung
make dev #initialisiert Django und die Virtual env
exit #Verlassen der Umgebung
vagrant ssh #Erneutes Verbinden. venv ist nun aktiviert.
\end{src}
\subsection{IDE}
Nun kann ein PyCharm Projekt erstellt werden. Dazu wählt man \mintinline{shell}{Datei -> öffnen} und wählt den opendatahub Ordner aus. Das Projekt wird erstellt. In den Projekteinstellungen muss nun noch der Projektinterpreter auf die Vagrant instanz gelegt werden, damit alle Debugging Features funktionieren.
\subsection{Deployment}
Seit der Vagrant Version 1.7 vom Dezember 2014 ist Deployment mittels Vagrant möglich. Durch den Befehl \mintinline{shell}{vagrant push} kann, je nach Konfiguration, auf Heroku, SFTP und FTP sowie durch selbstgeschriebene Kommandozeilenskripte oder Atlas deployed werden.
\\Syntaxbeispiel für einen FTP-push: \cite{vagrant-deployment}
\begin{src}{ruby}
config.push.define "ftp" do |push|
  push.host = "ftp.test.com"
  push.username = "benutzer1"
  push.password = "Passwort1"
  push.secure = false
  push.destination = "/"
  push.dir = "/"
end
\end{src}
\section{Tests}